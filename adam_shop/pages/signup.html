<!DOCTYPE html>
<html lang="en">
<!-- Basic -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Site Metas -->
    <title>ADAM SHOP</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <!-- Site CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="../css/responsive.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/custom.css">

    <link rel="stylesheet" href="../css/login.css">


    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body>
     <div class="login-box">
          <h2>Sign-up</h2>
          <form method="post" >
            <div class="user-box">
              <input type="text" name="username" required="true">
              <label>Username</label>
            </div>
            <div class="user-box">
              <input type="password" name="password" required="true">
              <label>Password</label>
            </div>
            <div class="user-box">
               <input type="password" name="confirmPassword" required="true">
               <label>Confirm Password</label>
             </div>
               <a id="btn-submit">
                 <span></span>
                 <span></span>
                 <span></span>
                 <span></span>
                 <p style="color:azure">
                  Submit
                </p>
               </a>
            <p class="text--center">
               <span style="color:azure" class="notify">
                    Already have an account
               </span>
               <a href="/?view=login.html" class="sign-up">Login now</a>
               <!-- <svg class="icon">
                    <use xlink:href="#icon-arrow-right"></use>
               </svg> -->
          </p>
            <!-- <a href="#">
               <span></span>
               <span></span>
               <span></span>
               <span></span>
               signin
             </a> -->
          </form>
        </div>
        <script>
          //lấy ô input của người dùng
          const username = document.getElementsByName('username')[0]
          const password = document.getElementsByName('password')[0]
          const confirmPassword = document.getElementsByName('confirmPassword')[0]
          const btn_submit = document.getElementById("btn-submit");

          //tạo object chứa thông tin người dùng nhập
          const valueInput = new Object()
          username.onchange = () => {
            valueInput.username = username.value
          }
          password.onchange = () => {
            valueInput.password = password.value
          }
          confirmPassword.onchange = () => {
            valueInput.confirmPassword = confirmPassword.value
          }
          btn_submit.onclick = () => {
            if(valueInput.username && valueInput.password && valueInput.confirmPassword){
              //tạo đối tượng XMLHttpRequest
              const xhr = new XMLHttpRequest()
    
              // Thiết lập các thông số của yêu cầu
              xhr.open("POST", "http://localhost:4000/account/register",true);
              xhr.setRequestHeader('Content-Type', 'application/json');
              // Đăng ký hàm xử lý sự kiện onreadystatechange
              xhr.onreadystatechange = function() {
                // Kiểm tra trạng thái của yêu cầu
                if (xhr.readyState == 4) {
                  if (xhr.status == 200) {
                    alert(xhr.responseText)
                    location.replace("http://localhost:4000");
                  } else {
                    // Yêu cầu thất bại
                    // Xử lý lỗi nếu có
                    alert(xhr.responseText);
                  }
                }
              };
              //chuyển object thành json để gửi lên sever
              const json = JSON.stringify(valueInput)
              // Gửi yêu cầu đến server
              xhr.send(json);
            }else {
              alert('Bạn phải nhập đủ thông tin đăng nhập');
            }
          }

        </script>
        <!-- <script src="../js/login.js"></script> -->
</body>
</html>